(this["webpackJsonpalrashid-po-application"]=this["webpackJsonpalrashid-po-application"]||[]).push([[0],{119:function(e,t,a){},476:function(e,t){},563:function(e,t,a){e.exports=a(900)},569:function(e,t,a){},576:function(e,t,a){},579:function(e,t,a){e.exports=a.p+"static/media/alrashid-logo.b498335f.png"},610:function(e,t,a){},652:function(e,t){},654:function(e,t){},666:function(e,t){},668:function(e,t){},693:function(e,t){},695:function(e,t){},696:function(e,t){},702:function(e,t){},704:function(e,t){},722:function(e,t){},725:function(e,t){},741:function(e,t){},744:function(e,t){},749:function(e,t){},750:function(e,t){},900:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),l=a.n(s),c=a(200),o=(a(568),a(569),a(30)),i=a(31),u=a(33),m=a(32),p=a(22),d=a(23),h=a(919),f=a(920),E=a(921),v=a(24),O=a.n(v),b=a(50),g=a(6),P=a.n(g),y=a(10),D=a(46),S=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$filter=TaskOutcome eq null and AssignedTo eq '").concat(a,"'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log(r.d.results),e.abrupt("return",r.d.results);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$filter=TaskOutcome ne null and AssignedTo eq '").concat(a,"'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log(r.d.results),e.abrupt("return",r.d.results);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(y.a)(P.a.mark((function e(){var t,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/pmo/_api/web/CurrentUser",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,console.log("Current logged in user",a.d.Id),e.abrupt("return",a.d.Id);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=(a(574),a(575),a(576),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={load:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{id:"ToggleNav",className:O()("sidebar",{"is-open":this.props.isOpen})},r.a.createElement("div",{className:"sidebar-header"},r.a.createElement("span",{color:"info",onClick:this.props.toggle,style:{color:"#fff"}},"\xd7"),r.a.createElement("h5",null,"Purchase Order App")),r.a.createElement("div",{className:"side-menu"},r.a.createElement(h.a,{vertical:!0,className:"list-unstyled pb-3"},r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/po-search"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"New Request")),r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/pages/my-requests"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"PO Requests")),r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/pages/ArchivedPO"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"Archived PO")),r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/pages/my-tasks"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"Pending Tasks")),r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/pages/Dashboard"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"Dashboard")),r.a.createElement(f.a,null,r.a.createElement(E.a,{tag:b.a,to:"/pages/ExportPO"},r.a.createElement(p.a,{icon:d.d,className:"mr-2"}),"Export PO")))))}}]),a}(n.Component)),x=a(944),j=a(931),C=a(922),T=a(923),A=a(924),R=a(947),M=(a(579),function(){var e=Object(y.a)(P.a.mark((function e(){var t,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/pmo/_api/web/CurrentUser",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,console.log("Current logged in user",a.d),e.abrupt("return",a.d);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),I=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(""),i=Object(c.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){M().then((function(e){return m("Welcome, ".concat(e.Title))}))}),[]);var v={fontWeight:"500"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{color:"light",light:!0,className:"navbar shadow-lg p-3 mb-3 bg-white rounded",expand:"md"},r.a.createElement(T.a,{color:"secondary",className:"btn-toggle-nav",onClick:e.toggle},r.a.createElement(p.a,{icon:d.a})),r.a.createElement(A.a,{className:"nav-toggler",onClick:function(){return l(!s)}}),r.a.createElement("img",{className:"logo",src:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/SiteAssets/PO_App/alrashid-logo.b498335f.png",alt:"AL RASHID ABETONG LOGO"}),r.a.createElement(R.a,{isOpen:s,navbar:!0},r.a.createElement(h.a,{className:"ml-auto",navbar:!0},r.a.createElement(f.a,null,r.a.createElement(E.a,{style:{color:"rgb(35,86,151)",fontSize:"22px",marginTop:"-4px"}})),r.a.createElement(f.a,null,r.a.createElement(E.a,{style:v},r.a.createElement(p.a,{icon:d.h,className:"mr-2"}),u)),r.a.createElement(f.a,null,r.a.createElement(E.a,{style:v,href:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/_layouts/15/SignOut.aspx"},r.a.createElement(p.a,{icon:d.f,className:"mr-2"}),"Sign Out"))))))},G=a(127),F=a(533),q=a(105),B=a(250),V=a(925),$=a(926),W=a(927),z=a(928),L=a(929),_=a(930),U=(a(119),a(56)),Y=a.n(U),J=a(275),H=a.n(J),Q=a(70),Z=a.n(Q),X=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://po-webapi.alrashidabetong.com/api/PODetails?PONumber=".concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a;case 5:if(!e.sent.ok){e.next=13;break}return e.next=9,a.json();case 9:return n=e.sent,e.abrupt("return",JSON.parse(n));case 13:alert("Purchase Order Fetching API is not working. Please check with your IT Support.");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=ID,chff,POStatus,vwno,Created,POVersion&$orderby=ID desc&$filter=chff eq ").concat(a),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log("Data from list",r.d),e.abrupt("return",r.d.results);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://po-webapi.alrashidabetong.com/api/PODetails?recepient=".concat(t,"&PONumber=").concat(a,"&OTP=").concat(n),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log("Email Send Status",s),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te={fontSize:"12px"},ae=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).SearchPO=function(){n.validateSearchInput()&&n.setState({POLoading:!0},n.validateExistingPO(n.state.searchInput))},n.validateExistingPO=function(e){K("PMO",e).then((function(e){if(e.length>0){var t,a=[],s=[],l=[],c=Object(q.a)(e);try{for(c.s();!(t=c.n()).done;){var o=t.value;null!==o.POStatus&&(o.POStatus.indexOf("InProgress")>-1&&a.push(o),o.POStatus.indexOf("Approved")>-1&&s.push(o),o.POStatus.indexOf("Rejected")>-1&&l.push(o))}}catch(d){c.e(d)}finally{c.f()}if(a.length>0){var i=a.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.vwno),r.a.createElement("td",null,e.chff),r.a.createElement("td",null,e.POVersion),r.a.createElement("td",null,e.POStatus),r.a.createElement("td",null,r.a.createElement(Z.a,{format:"DD-MM-YY hh:mm"},e.Created)))})),u=r.a.createElement(V.a,{striped:!0,size:"sm",responsive:!0,style:te},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticket Number"),r.a.createElement("th",null,"PO Number"),r.a.createElement("th",null,"Revision"),r.a.createElement("th",null,"Request Status"),r.a.createElement("th",null,"Created Date"))),r.a.createElement("tbody",null,i));H()({text:"Below PO Requests are already in Progress. You cannot Submit another request Now",buttons:{Ok:{text:"Ok",value:"Ok"}},content:r.a.createElement("div",null,u)}).then((function(e){"Ok"===e&&n.setState({POLoading:!1})}))}if(l.length>0){s.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.vwno),r.a.createElement("td",null,e.chff),r.a.createElement("td",null,e.POVersion),r.a.createElement("td",null,e.POStatus),r.a.createElement("td",null,r.a.createElement(Z.a,{format:"DD-MM-YY hh:mm"},e.Created)))}));H()({text:"Request has been rejected before, Do you want to continue?",buttons:{Yes:{text:"Yes",value:"Yes"},No:{text:"No",value:"No"}}}).then((function(e){switch(e){case"Yes":X(n.state.searchInput).then((function(e){return n.loadPODetails(e)})).catch((function(e){return console.error("API Error",e)}));break;case"No":n.setState({POLoading:!1});break;default:Y()("Something is wrong!!")}}))}if(s.length>0&&a.length<1){var m=s.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.vwno),r.a.createElement("td",null,e.chff),r.a.createElement("td",null,e.POVersion),r.a.createElement("td",null,e.POStatus),r.a.createElement("td",null,r.a.createElement(Z.a,{format:"DD-MM-YY hh:mm"},e.Created)))})),p=r.a.createElement(V.a,{striped:!0,size:"sm",responsive:!0,style:te},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticket Number"),r.a.createElement("th",null,"PO Number"),r.a.createElement("th",null,"Revision"),r.a.createElement("th",null,"Request Status"),r.a.createElement("th",null,"Created Date"))),r.a.createElement("tbody",null,m));H()({text:"Below PO Requests are already Approved. Do you want to re-process?",buttons:{Yes:{text:"Yes",value:"Yes"},No:{text:"No",value:"No"}},content:r.a.createElement("div",null,p)}).then((function(e){switch(e){case"Yes":X(n.state.searchInput).then((function(e){return n.loadPODetails(e)}));break;case"No":n.setState({POLoading:!1});break;default:Y()("Something is wrong!!")}}))}}else X(n.state.searchInput).then((function(e){return n.loadPODetails(e)}))}))},n.loadPODetails=function(){var e=Object(y.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t.PONumber?(Y()("There is no record with this PO Number"),n.setState({POLoading:!1})):n.setState({PODetails:t,POLoading:!1},n.OTPValidate);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={searchInput:null,searchInputValid:!0,POLoading:!1,POLoaded:!1,OTPValid:!1,PODetails:{},RejectedItems:{}},n.handleSearchInputChange=n.handleSearchInputChange.bind(Object(B.a)(n)),n}return Object(i.a)(a,[{key:"validateSearchInput",value:function(){var e=!0;return null===this.state.searchInput&&(e=!1,Y()("Search Input is empty")),e}},{key:"OTPValidate",value:function(){var e=this,t=Math.floor(1e5+9e5*Math.random());console.log(t,this.state),ee(this.state.PODetails.MakerEmail,this.state.PODetails.PONumber,t),localStorage.setItem("OTP",t);var a=document.createElement("input");a.setAttribute("placeholder","6 Digit Code"),a.setAttribute("ID","OTP"),Y()({title:"Enter OTP",text:"Enter the OTP sent to your email:",icon:"info",buttons:{ResendOTP:{},Confirm:{Text:"Confirm"}},content:a}).then((function(t){var n=a.value;switch(console.log(n),t){case"Confirm":""===n||n!==localStorage.getItem("OTP")?Y()("You have entered invalid or empty OTP"):n===localStorage.getItem("OTP")&&Y()("You are sucessfully validated").then(e.setState({OTPValid:!0,POLoading:!1,POLoaded:!0}));break;case"ResendOTP":localStorage.removeItem("OTP"),e.OTPValidate()}}))}},{key:"handleSearchInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(F.a)({},n,a))}},{key:"render",value:function(){var e=this.state.POLoading,t=null;return!1===this.state.POLoaded&&(t=r.a.createElement($.a,{className:""},r.a.createElement(W.a,null,r.a.createElement(z.a,{row:!0,className:"form-header-container"},r.a.createElement(p.a,{icon:d.e,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Search by PO Number")),r.a.createElement(z.a,{row:!0},r.a.createElement(L.a,{className:"search-input-col text-center"},r.a.createElement(_.a,{type:"number",name:"searchInput",className:"POSearchInput",placeholder:"Enter PO Number to search",onChange:this.handleSearchInputChange}),r.a.createElement(T.a,{type:"button",color:"success",className:"btn-po-search mt-2",onClick:this.SearchPO,disabled:e},e?r.a.createElement(p.a,{icon:d.g,className:"mr-2"}):null,"Search")))))),console.log("PO Detals in state is",this.state),r.a.createElement("div",{style:{width:"100%"}},t,this.state.POLoaded?r.a.createElement(G.b,{to:{pathname:"/po-request/new",state:{podetails:this.state.PODetails}}}):null)}}]),a}(n.Component),ne=(a(593),a(932)),re=a(536),se=a.n(re),le=a(126),ce=a(534),oe=a.n(ce),ie=a(946),ue=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"},body:JSON.stringify(t)},e.next=3,fetch("https://po-webapi.alrashidabetong.com/api/attachment/Upload",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,console.log("Attachment Upload Response API",r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://po-webapi.alrashidabetong.com/api/Attachment/GetAttach?refId=".concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://po-webapi.alrashidabetong.com/api/Attachment/deletefile?refId=".concat(t,"&title=").concat(a,"&path=").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log("Attachment DELETION Status",s),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),de=(a(610),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).UpdateAttachmentDetailsInView=function(){me(n.state.RefID).then((function(e){console.log("All Attachments in View Mode",JSON.parse(e)),n.setState({uploadedFiles:JSON.parse(e)})}))},n.handleAttachmentTable=function(){var e="C:\\POAttachments\\".concat(n.state.RefID,"\\Attachments\\").concat(n.state.selectedFiles.name),t={Title:n.state.selectedFiles.name,Path:e,FileSize:n.state.selectedFiles.size},a=Object(le.a)(n.state.uploadedFiles);a.push(t),n.setState({uploadedFiles:a},n.UpdateStateInForm)},n.UpdateStateInForm=function(){n.props.handleFileCommit(n.state.RefID),l.a.findDOMNode(n.refs.form).disabled=!1},n.deleteAttachment=function(e){n.setState({deleting:!0}),pe(n.state.RefID,e.Title,e.Path).then(n.setState({deleting:!1},n.UpdateAttachmentDetailsInView))},n.state={selectedFiles:null,selected:!1,RefID:null,uploadedFiles:[],uploading:!1,deleting:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if("view"===this.props.mode||"ArchivedPOview"===this.props.mode||"Taskview"===this.props.mode)console.log("RefID View Mode",this.props.AttachmentRefID),this.setState({RefID:this.props.AttachmentRefID},this.UpdateAttachmentDetailsInView);else{var e=Object(ie.a)();this.setState({RefID:e})}}},{key:"getFiles",value:function(e){this.setState({selectedFiles:e,selected:!0})}},{key:"FileUploadHanler",value:function(){var e=this;l.a.findDOMNode(this.refs.form).disabled=!0;var t={Filebase:this.state.selectedFiles.base64,Title:this.state.selectedFiles.name,RefID:this.state.RefID,ApplicationName:"POApprovalApp",AttachmentType:"attachment",uploadStatus:"draft"};this.setState({uploading:!0}),ue(t).then((function(t){return e.setState({uploading:!1,selected:!1},e.handleAttachmentTable)})),l.a.findDOMNode(this.refs.form).value=""}},{key:"render",value:function(){var e,t,a,n=this;return console.log("Delete State",this.state),console.log("File Reference",this.state.RefID),console.log("Uploaded Files",this.state.uploadedFiles),console.log("FileUpload Property Passed",this.props),e=this.state.uploadedFiles.length>0?this.state.uploadedFiles.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{className:"attachment-link",rel:"noopener noreferrer",href:"https://po-webapi.alrashidabetong.com/api/Attachment/Getfile?title=".concat(e.Title,"&path=").concat(e.Path),target:"_blank"},e.Title)),r.a.createElement("td",null,e.FileSize),"new"===n.props.mode?r.a.createElement("td",{className:"attachment-delete"},n.state.deleting?r.a.createElement(p.a,{icon:d.g}):r.a.createElement(T.a,{type:"button",onClick:function(){return n.deleteAttachment(e)},className:"btn btn-danger attach-del-btn"},"Delete")):r.a.createElement("td",null))})):r.a.createElement("tr",{className:"text-center"},r.a.createElement("td",{colSpan:"3"},"No Attachment Added")),a=this.state.uploading?r.a.createElement("div",null,r.a.createElement(p.a,{icon:d.g,className:"mt-4 mr-4  file-upload-btn"}),"File Uploading"):r.a.createElement(T.a,{className:"Primary file-upload-btn",type:"button",onClick:this.FileUploadHanler.bind(this),disabled:!this.state.selected},"Upload"),"new"===this.props.mode&&(t=r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12},r.a.createElement("label",{className:"AttachmentLabel"},"Upload Supporting Documents ")),r.a.createElement(L.a,{md:6},r.a.createElement("div",{className:"files color"},r.a.createElement(oe.a,{ref:"form",className:"form-control",multiple:!1,onDone:this.getFiles.bind(this)}))),r.a.createElement(L.a,{md:2},a))),r.a.createElement(r.a.Fragment,null,t,r.a.createElement(j.a,null,r.a.createElement(L.a,{md:6},r.a.createElement(V.a,{striped:!0,className:"mt-2"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Attachment Name"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null))),r.a.createElement("tbody",null,e)))))}}]),a}(n.Component)),he=function(){var e=Object(y.a)(P.a.mark((function e(){var t,a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},e.next=3,fetch("/sites/apps/PMO/_api/contextinfo",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n.d.GetContextWebInformation.FormDigestValue);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$top=100&$orderby=ID desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose","X-RequestDigest":n,credentials:"same-origin"},body:JSON.stringify(a)},console.log(r),e.next=4,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items"),r);case 4:return s=e.sent,e.next=7,s.json();case 7:return l=e.sent,e.abrupt("return",l.d);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://po-webapi.alrashidabetong.com/api/Attachment/CommitAttachments?refId=".concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,console.log("Attachment Commit Status",n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items('").concat(a,"')"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.d);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=a(535),ge=a.n(be),Pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).createPOItemHandler=function(t){if(t.preventDefault(),""===e.state.SelectedDepartment)Y()("Deepartment Input is Empty!!");else{(function(){e.refs.Btn.setAttribute("disabled","disabled")});var a=JSON.stringify(e.state.podetails.GrandTotal).replace(/"/g,""),n=Math.trunc(a),r={Title:e.state.podetails.PONumber,chff:e.state.podetails.PONumber,POJSONData:JSON.stringify(e.state.podetails),j3xm:e.state.podetails.MakerName,zh3a:e.state.podetails.MakerEmail,ozud:e.state.SelectedDepartment,POVersion:JSON.stringify(e.state.podetails.POVersion),AttachmentReferenceNumber:e.state.AttachmentsReferenceNumber,yyrh:JSON.stringify(e.state.podetails.GrandTotal),Num:n,Currency:JSON.stringify(e.state.podetails.Currency),WHse:e.state.podetails.POItems[0].WHse};he().then((function(t){return Ee("PMO",r,t).then(ve(e.state.AttachmentsReferenceNumber)).then(e.setState({redirectMyRequest:!0}))}))}},e.CommitAttachment=function(t){e.setState({AttachmentsReferenceNumber:t})},e.RedirectMyTaskPage=function(){e.setState({redirectMyTask:!0})},e.state={GMReviewalStatus:"",DisableGMButtons:!0,redirectMyRequest:!1,redirectMyTask:!1,podetails:{POItems:[],POAdditionalInfo:[]},Departments:{},SelectedDepartment:"",AttachmentsReferenceNumber:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;"new"===this.props.match.params.mode?(this.setState({podetails:this.props.location.state.podetails}),fe("Department Managers").then((function(t){e.setState({Departments:t})}))):"Taskview"===this.props.match.params.mode?(Oe("Workflow Tasks",this.props.match.params.TaskId).then((function(t){console.log(t);var a=t.Body.includes("RW"),n=t.Body.includes("DMC"),r=t.Body.includes("PMC");!0!==r&&!0!==n||e.setState({DisableGMButtons:!1}),e.setState({TaskCode:t.Body,ReviewalTask:a,PMCcheck:r,DMCcheck:n,TaskStatus:t.Status}),console.log("chk",a)})),Oe("PMO",this.props.match.params.id).then((function(t){e.setState({podetails:JSON.parse(t.POJSONData),SelectedDepartment:t.ozud,AttachmentsReferenceNumber:t.AttachmentReferenceNumber,AL01:t.ApprovalLogRecord,RequestStage:t.PendingWith,RequestSatge01:t.bdck,GMReviewalStatus:t.ReviewalStatus})}))):"view"===this.props.match.params.mode?Oe("PMO",this.props.match.params.id).then((function(t){console.log("date returned",t),e.setState({podetails:JSON.parse(t.POJSONData),SelectedDepartment:t.ozud,AttachmentsReferenceNumber:t.AttachmentReferenceNumber,AL01:t.ApprovalLogRecord,RequestStage:t.PendingWith,RequestSatge01:t.bdck,GMReviewalStatus:t.ReviewalStatus})})):"ArchivedPOview"===this.props.match.params.mode&&Oe("ArchivedPO",this.props.match.params.id).then((function(t){console.log("date returned",t),e.setState({podetails:JSON.parse(t.POJSONData),SelectedDepartment:t.ozud,AttachmentsReferenceNumber:t.AttachmentReferenceNumber,AL01:t.ApprovalLogRecord,RequestStage:t.PendingWith,RequestSatge01:t.bdck})}))}},{key:"onDepartmentChange",value:function(e){this.setState({SelectedDepartment:e[0].Title})}},{key:"CloseRequest",value:function(){this.setState({redirectMyTask:!0})}},{key:"RespondRequest",value:function(e,t){var a=this,n=document.getElementById("Comments01").value;console.log(n),he().then((function(a){console.log("latest2222222222",a);var r={TaskOutcome:e,Status:"Completed",Comments:n};ge.a.ajax({url:"/sites/apps/PMO/_api/Web/Lists/GetByTitle('Workflow Tasks')/Items(".concat(t,")"),type:"POST",contentType:"application/json;odata=verbose",data:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose","X-RequestDigest":a,credentials:"same-origin","X-HTTP-Method":"MERGE","If-Match":"*"},success:function(e){},error:function(e){console.log(e)}})})).then((function(){a.setState({redirectMyTask:!0})}))}},{key:"render",value:function(){var e=this;if(console.log("rw",this.state.GMReviewalStatus),!0===this.state.redirectMyRequest)return r.a.createElement(G.b,{to:"/pages/my-requests"});if(!0===this.state.redirectMyTask)return r.a.createElement(G.b,{to:"/pages/my-tasks"});var t,a,n,s={textAlign:"right"},l={background:"#eeeeee",fontWeight:"bold"},c=null,o=null,i=null,u=null,m=null,h=null;return"Taskview"===this.props.match.params.mode&&"Completed"!==this.state.TaskStatus&&(h=r.a.createElement(r.a.Fragment,null,"General MGR"===this.state.RequestStage&&!1===this.state.ReviewalTask&&!0===this.state.DisableGMButtons?r.a.createElement("div",null):null),m=r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,"General MGR"===this.state.RequestStage&&!1===this.state.ReviewalTask&&!0===this.state.DisableGMButtons?r.a.createElement("div",null,"N/R"==this.state.GMReviewalStatus?r.a.createElement("div",null,r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header",id:"RWContents"},"Assistant Manager Reviewal Status"),r.a.createElement(T.a,{color:"danger",id:"RWButton"},"Pending")," "):r.a.createElement("div",null,r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header",id:"RWContents"},"Assistant Manager Reviewal Status"))):null,r.a.createElement("div",null,r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{id:"ALog",className:"form-header"},"Approval Log")),r.a.createElement("div",{id:"VResponse",dangerouslySetInnerHTML:{__html:this.state.AL01}}))),u=r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(z.a,null,r.a.createElement(ne.a,{for:"exampleText"},"Comments"),r.a.createElement(_.a,{type:"textarea",name:"text",id:"Comments01"})),"Asst.Gen.MGR"===this.state.RequestStage?r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Approve",e.props.match.params.TaskId)}},"Approve"),r.a.createElement(T.a,{color:"danger",id:"AppButton",onClick:function(){return e.RespondRequest("Reject",e.props.match.params.TaskId)}},"Reject"))):null,"Purchase MGR"===this.state.RequestStage?r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Approve",e.props.match.params.TaskId)}},"Approve"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Quick Approve",e.props.match.params.TaskId)}},"Quick Approve"),r.a.createElement(T.a,{color:"danger",id:"AppButton",onClick:function(){return e.RespondRequest("Reject",e.props.match.params.TaskId)}},"Reject"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.CloseRequest()}},"Cancel"))):null,"General MGR"===this.state.RequestStage&&!1===this.state.ReviewalTask&&!0===this.state.DisableGMButtons?r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Approve",e.props.match.params.TaskId)}},"Approve"),r.a.createElement(T.a,{id:"AppButton0",onClick:function(){return e.RespondRequest("Send Back to Department Manager",e.props.match.params.TaskId)}},"Send Back to Department Manager"),r.a.createElement(T.a,{id:"AppButton0",onClick:function(){return e.RespondRequest("Send Back to Purchase Manager",e.props.match.params.TaskId)}},"Send Back to Purchase Manager"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.CloseRequest()}},"Close"),r.a.createElement(T.a,{color:"danger",id:"AppButton",onClick:function(){return e.RespondRequest("Reject",e.props.match.params.TaskId)}},"Reject")))):null,"Depart. MGR"===this.state.RequestStage?r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Approve",e.props.match.params.TaskId)}},"Approve"),r.a.createElement(T.a,{color:"danger",id:"AppButton",onClick:function(){return e.RespondRequest("Reject",e.props.match.params.TaskId)}},"Reject"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.CloseRequest()}},"Close"))):null,!0===this.state.ReviewalTask?r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Review",e.props.match.params.TaskId)}},"Review"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.CloseRequest()}},"Close"))):null,"GMClarification"!==this.state.RequestSatge01||!0!==this.state.DMCcheck&&!0!==this.state.PMCcheck?null:r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12,id:"ApprovalButtons"},r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.RespondRequest("Submit",e.props.match.params.TaskId)}},"Submit"),r.a.createElement(T.a,{id:"AppButton",onClick:function(){return e.CloseRequest()}},"Close"))))),"view"!==this.props.match.params.mode&&"Taskview"!==this.props.match.params.mode&&"ArchivedPOview"!==this.props.match.params.mode||(i=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(L.a,{md:12},r.a.createElement(V.a,{bordered:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{style:l},"Terms and conditions")),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.podetails.TermsAndConditions)))))))),"new"===this.props.match.params.mode?(c=r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{row:!0},r.a.createElement(L.a,{md:12,className:"text-right"},r.a.createElement(T.a,{className:"mr-2 btn-cancel",color:"primary"},"Cancel"),r.a.createElement(T.a,{ref:"Btn",color:"danger",onClick:this.createPOItemHandler},"Submit")))),t=r.a.createElement(se.a,{className:"po-input",clearable:!0,options:this.state.Departments,labelField:"Title",valueField:"Title",onChange:function(t){return e.onDepartmentChange(t)}})):"view"!==this.props.match.params.mode&&"Taskview"!==this.props.match.params.mode&&"ArchivedPOview"!==this.props.match.params.mode||(t=r.a.createElement(_.a,{className:"po-input",value:this.state.SelectedDepartment||"",type:"text",name:"",id:"initiatorDepartment",disabled:!0})),this.state.podetails.POItems&&(a=this.state.podetails.POItems.map((function(e){return r.a.createElement("tr",{key:e.SLNO},r.a.createElement("th",{scope:"row"},e.SLNO),r.a.createElement("td",null,e.Proj),r.a.createElement("td",null,e.Dept),r.a.createElement("td",null,e.Prod),r.a.createElement("td",null,e.WHse),r.a.createElement("td",null,e.ItemCode),r.a.createElement("td",null,e.Description),r.a.createElement("td",null,e.DelDate),r.a.createElement("td",{style:s},e.code),r.a.createElement("td",{style:s},e.quantity),r.a.createElement("td",{style:s},r.a.createElement(D.a,{value:e.UnitPrice||0,displayType:"text",thousandSeparator:!0})),r.a.createElement("td",{style:s},r.a.createElement(D.a,{value:e.TotalPrice||0,displayType:"text",thousandSeparator:!0})))}))),console.log("Addtional Info",this.state.podetails.POAdditionalInfo.length),this.state.podetails.POAdditionalInfo&&(n=this.state.podetails.POAdditionalInfo.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.SNo),r.a.createElement("td",null,e.Type))}))),0===this.state.podetails.POAdditionalInfo.length&&(n=r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},"No Addtional Info"))),"new"!==this.props.match.params.mode&&null===this.state.AttachmentsReferenceNumber||(o=r.a.createElement(de,{mode:this.props.match.params.mode,handleFileCommit:this.CommitAttachment,AttachmentRefID:this.state.AttachmentsReferenceNumber})),r.a.createElement("div",{className:"form-container"},r.a.createElement($.a,null,r.a.createElement(W.a,null,r.a.createElement(z.a,{row:!0,className:"form-header-container"},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Purchase Order Details")),r.a.createElement(z.a,{row:!0},r.a.createElement(L.a,{md:4},r.a.createElement(ne.a,{for:"initiatorName"},"Maker Name"),r.a.createElement(_.a,{className:"po-input",value:this.state.podetails.MakerName||"",type:"text",name:"maker-name",id:"initiatorDepartment",disabled:!0})),r.a.createElement(L.a,{md:4},r.a.createElement(ne.a,{for:"initiatorName"},"Maker Email"),r.a.createElement(_.a,{className:"po-input",value:this.state.podetails.MakerEmail||"",type:"text",name:"email",id:"initiatorEmail",disabled:!0})),r.a.createElement(L.a,{md:4},r.a.createElement(ne.a,{for:"initiatorDepartment"},"Department"),t)),r.a.createElement(z.a,{row:!0},r.a.createElement(L.a,{md:4},r.a.createElement(ne.a,{for:"createdDate"},"Created Date"),r.a.createElement(_.a,{className:"po-input",defaultValue:this.state.podetails.CreatedDate||"",type:"text",name:"date",id:"createdDate",disabled:!0})),r.a.createElement(L.a,{md:4},r.a.createElement(ne.a,{for:"poNumber"},"PO Number"),r.a.createElement(_.a,{className:"po-input",value:this.state.podetails.PONumber||"",type:"text",name:"poNumber",id:"poNumber",disabled:!0})),r.a.createElement(L.a,{md:4,className:"d-flex align-items-center"})),r.a.createElement(z.a,{row:!0,className:"form-header-container",style:{margin:0}},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Item Details")),r.a.createElement("div",{className:"table-responsive-md"},r.a.createElement(V.a,{bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"#"),r.a.createElement("th",{scope:"col",colSpan:"4",className:"th-main align-middle text-center"},"Dimension"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Item Code"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Description"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Del. Date"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Unit Code"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Quantity"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Unit Price"),r.a.createElement("th",{scope:"col",rowSpan:"2",className:"th-main align-middle text-center"},"Total price")),r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"th-sub align-middle text-center"},"Proj."),r.a.createElement("th",{scope:"col",className:"th-sub align-middle text-center"},"Dept"),r.a.createElement("th",{scope:"col",className:"th-sub align-middle text-center"},"Prod"),r.a.createElement("th",{scope:"col",className:"th-sub align-middle text-center"},"W.Hse"))),r.a.createElement("tbody",null,a),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Grand Total (",this.state.podetails.Currency,")"),r.a.createElement("th",{colSpan:"9",style:s},this.state.podetails.GrandTotalWord),r.a.createElement("th",{colSpan:"1",style:s},r.a.createElement(D.a,{value:this.state.podetails.GrandTotal||0,displayType:"text",thousandSeparator:!0})))))),r.a.createElement(j.a,null,r.a.createElement(L.a,{md:4},r.a.createElement(V.a,{bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2",style:l},"Supplier Info"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier Name"),r.a.createElement("td",null,this.state.podetails.SupplierName)),r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier No"),r.a.createElement("td",null,this.state.podetails.SupplierNumber)),r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier Location"),r.a.createElement("td",null,this.state.podetails.SupplierLocation)),r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier Email"),r.a.createElement("td",null,this.state.podetails.SupplierEmail)),r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier Tel"),r.a.createElement("td",null,this.state.podetails.SupplierTel)),r.a.createElement("tr",null,r.a.createElement("td",null,"Supplier Address"),r.a.createElement("td",null,this.state.podetails.SupplierAddress))))),r.a.createElement(L.a,{md:4},r.a.createElement(V.a,{bordered:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2",style:l},"Addtional Info")),n))),r.a.createElement(L.a,{md:4},r.a.createElement(V.a,{bordered:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:l},"Remarks 1")),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.podetails.Remark1)),r.a.createElement("tr",null,r.a.createElement("td",{style:l},"Remarks 2")),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.podetails.Remark2)))))),i,o,c)),h,m,u)}}]),a}(n.Component),ye=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$top=100&$orderby=ID desc&$filter=RequestStatus eq 'Completed'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('PMO')/items?%24skiptoken=Paged%3dTRUE%26p_ID%3d".concat(a,"&%24top=100&$filter=RequestStatus eq 'Completed'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('PMO')/items?%24skiptoken=Paged%3dTRUE%26p_ID%3d".concat(a,"&%24top=2000&$filter=RequestStatus eq 'Completed'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$orderby=ID desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=a(933),we=a(124),xe=a.n(we),je=(a(414),{color:"red",marginLeft:"40%",fontSize:"20px"}),Ce={padding:"10%"},Te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var s;return Object(o.a)(this,a),(s=t.call(this,e,n)).itemViewFormatter=function(e){return s.test(),r.a.createElement(b.a,{className:"table-anchor",to:"/po-request/view/".concat(e.dependentValues.Id)},"POTN",e.value)},s.test=function(){console.log("Testing")},s.itemPDFViewFormatter=function(e){var t="";return"Approved"===e.value&&(t=r.a.createElement("a",{style:je,target:"_blank",rel:"noopener noreferrer",href:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/GeneratedPurchaseOrders/".concat(e.dependentValues.chff,"-").concat(e.dependentValues.POVersion,".pdf")},r.a.createElement(p.a,{icon:d.c,className:"mr-2"}))),t},s.SOitemPDFViewFormatter=function(e){var t="";return"Approved"===e.value&&(t=r.a.createElement("a",{style:je,target:"_blank",rel:"noopener noreferrer",href:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/SupplierPOReport/".concat(e.dependentValues.chff,"-").concat(e.dependentValues.POVersion,".pdf")},r.a.createElement(p.a,{icon:d.c,className:"mr-2"}))),t},s.DateFormatter=function(e){return r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("span",null,s.formatDate(e.value)))},s.GrandTotalFormatter=function(e){return r.a.createElement(D.a,{style:Ce,value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(JSON.parse(e.dependentValues.POJSONData).Currency," ")})},s.initColumnDefs=function(){s._columns=[{key:"Id",name:"Ticket Number",formatter:s.itemViewFormatter,getRowMetaData:function(e){return e},width:"5%",Id:s.props.value},{key:"chff",name:"PO Number",width:"5%"},{key:"j3xm",name:"PO Maker",width:"5%"},{key:"ozud",name:"Department",width:"5%"},{key:"yyrh",name:"Grand Total",width:"10%",textAlign:"right !important",formatter:s.GrandTotalFormatter,getRowMetaData:function(e){return e}},{key:"Created",name:"Requested Date",width:"5%",formatter:s.DateFormatter},{key:"RequestStatus",name:"Request Status",width:"25%"},{key:"ApprovalStatus",name:"Approval Status",width:"25%"},{key:"RespondedDate",name:"Responded Date",width:"25%"},{key:"PendingWith",name:"Pending With",width:"25%"},{key:"POStatus",name:"IPOC",formatter:s.itemPDFViewFormatter,width:"1%",getRowMetaData:function(e){return e}},{key:"POStatus",name:"SPOC",formatter:s.SOitemPDFViewFormatter,width:"1%",getRowMetaData:function(e){return e}}]},s.rowGetter=function(e){return s.props.PODetails[e]},s.initColumnDefs(),s}return Object(i.a)(a,[{key:"formatDate",value:function(e){return r.a.createElement(Z.a,{format:"MM/DD/YYYY hh:mm"},e)}},{key:"GetNextPagePO",value:function(){return console.log("100")}},{key:"render",value:function(){var e;return this.props.PODetails?(console.log(void 0),e=r.a.createElement(xe.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.props.PODetails.length,minHeight:1e3,isScrolling:!1,sortColumn:!0,width:100})):e=r.a.createElement("div",{className:"text-center"},r.a.createElement(Ne.a,{className:"mr-3",animation:"border",variant:"secondary"}),r.a.createElement("span",null,"Loading PO Details ...")),r.a.createElement($.a,{style:{width:"100%"}},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Purchase Order Requests")),r.a.createElement(L.a,{md:12},e)))}}]),a}(n.Component),Ae=function(){var e=Object(y.a)(P.a.mark((function e(t,a){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$filter=chff eq '").concat(a,"'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(o.a)(this,a),(r=t.call(this,e,n)).GetPODetails=function(){ke("PMO").then((function(e){return r.setState({PODetails:e,InProgressView:"true",loaded:!0,LatestPOID:e[0].Id})}))},r.handleSearchInput=function(e){r.setState({PONumber:e.target.value})},r.searchData=function(){Ae("PMO",r.state.PONumber).then((function(e){return r.setState({PODetails:e})})),console.log(r.state.PONumber)},r.resetSearch=function(){"true"===r.state.InProgressView?ke("PMO").then((function(e){return r.setState({PODetails:e,InProgressView:"true",loaded:!0,LatestPOID:e[0].Id})})):"false"===r.state.InProgressView&&ye("PMO").then((function(e){return r.setState({PODetails:e,loaded:!0,InProgressView:"false",LatestPOID:e[0].Id})}))},r.filterRequestStatus=function(e){console.log(e.target.value),"InProgress"===e.target.value?ke("PMO").then((function(e){return r.setState({PODetails:e,InProgressView:"true",loaded:!0,LatestPOID:e[0].Id})})):"Completed"===e.target.value&&ye("PMO").then((function(e){return r.setState({PODetails:e,loaded:!0,InProgressView:"false",LatestPOID:e[0].Id})}))},r.filterApprovalStatus=function(e){r.setState({ApprovalStatusFilter:e.target.value})},r.filterDepartment=function(e){r.setState({DepartmentFilter:e.target.value})},r.filterPOMaker=function(e){r.setState({POMakerFilter:e.target.value})},r.state={loaded:!1,PODetails:null,PONumber:"",RequestStatusFilter:"InProgress/NotStarted",DepartmentFilter:"All",ApprovalStatusFilter:"All",POMakerFilter:"All",LatestPOID:"",InProgressView:"true"},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.GetPODetails()}},{key:"filterItems",value:function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(q.a)(this.state.PODetails);try{for(n.s();!(r=n.n()).done;)(s=r.value).chff.indexOf(t.PONumber)>-1&&a.push(s)}catch(l){n.e(l)}finally{n.f()}return e.abrupt("return",Promise.resolve(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetNextPagePO",value:function(e){var t=this;De("PMO",e).then((function(e){return t.setState({PODetails:e})}))}},{key:"GetFinalPagePO",value:function(e){var t=this;Se("PMO",e).then((function(e){return t.setState({PODetails:e})}))}},{key:"SearchPO",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;console.log(this.state.LatestPOID);var t,a,n=this.state.LatestPOID-100-100,s=n-100,l=s-100,c=l-100,o=c-100,i=o-100,u=i-100,m=u-100,h=m-100,f=h-100,E=f-100,v=this.state.PODetails;if("All"!==this.state.ApprovalStatusFilter&&(v=v.filter((function(t){return t.ApprovalStatus===e.state.ApprovalStatusFilter}))),"All"!==this.state.DepartmentFilter&&(v=v.filter((function(t){return t.ozud===e.state.DepartmentFilter}))),"All"!==this.state.POMakerFilter&&(v=v.filter((function(t){return t.j3xm===e.state.POMakerFilter}))),this.state.PODetails){var O=Object(le.a)(new Set(this.state.PODetails.map((function(e){return e.ozud}))));t=r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterDepartment},r.a.createElement("option",{defaultValue:!0},"All"),O.map((function(e,t){return r.a.createElement("option",{key:t},e)})),";")}if(this.state.PODetails){var b=Object(le.a)(new Set(this.state.PODetails.map((function(e){return e.j3xm}))));a=r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterPOMaker},r.a.createElement("option",{defaultValue:!0},"All"),b.map((function(e,t){return r.a.createElement("option",{key:t},e)})),";")}return r.a.createElement("div",{style:{minWidth:"100%",maxWidth:"100%"}},r.a.createElement($.a,{style:{width:"100%"},className:"mb-3"},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.e,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Filter Purchase Order Requests"))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"POMaker"),a),r.a.createElement("div",{className:"col-md-9",id:"legend"},r.a.createElement("p",{className:"mt-2"},r.a.createElement("span",{id:"ShortF"},"PM:")," Purchase Manager",r.a.createElement("span",{id:"ShortF"},"DM:")," Department Manager",r.a.createElement("span",{id:"ShortF"},"GM:")," General Manager")))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Request Status"),r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterRequestStatus},r.a.createElement("option",{value:"InProgress"},"Recent Submitted PO"),r.a.createElement("option",{value:"Completed"},"Older PO"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Approval Status"),r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterApprovalStatus},r.a.createElement("option",{defaultValue:!0},"All"),r.a.createElement("option",null,"PM-Approved"),r.a.createElement("option",null,"DM-Approved"),r.a.createElement("option",null,"AGM Approved"),r.a.createElement("option",null,"GM-Approved"),r.a.createElement("option",null,"PM-Rejected"),r.a.createElement("option",null,"DM-Rejected"),r.a.createElement("option",null,"GM-Rejected"),r.a.createElement("option",null,"AGM Rejected"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Department"),t),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Search PO"),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(_.a,{type:"text",placeholder:"Enter PO Number",value:this.state.PONumber,onChange:this.handleSearchInput}),r.a.createElement("button",{className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.searchData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.resetSearch,type:"button"},"Reset")))))),r.a.createElement(Te,{PODetails:v}),r.a.createElement("br",null),r.a.createElement(L.a,{md:12},"false"===this.state.InProgressView?r.a.createElement("div",{id:"pagination"},r.a.createElement(T.a,{size:"sm",color:"primary"},"1")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(n)}},"2")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(s)}},"3")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(l)}},"4")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(c)}},"5")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(o)}},"6")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(i)}},"7")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(u)}},"8")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(m)}},"9")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(h)}},"10")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(f)}},"11")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(E)}},"12")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetFinalPagePO(E)}},"13")," "):null),r.a.createElement("br",null))}}]),a}(n.Component),Me=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$top=100"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie={color:"red",marginLeft:"40%",fontSize:"20px"},Ge={padding:"10%"},Fe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var s;return Object(o.a)(this,a),(s=t.call(this,e,n)).itemViewFormatter=function(e){return r.a.createElement(b.a,{className:"table-anchor",to:"/po-request/ArchivedPOview/".concat(e.dependentValues.ID)},"POTN",e.value)},s.itemPDFViewFormatter=function(e){var t="";return"Approved"===e.value&&(t=r.a.createElement("a",{style:Ie,target:"_blank",rel:"noopener noreferrer",href:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/GeneratedPurchaseOrders/".concat(e.dependentValues.chff,"-").concat(e.dependentValues.POVersion,".pdf")},r.a.createElement(p.a,{icon:d.c,className:"mr-2"}))),t},s.SOitemPDFViewFormatter=function(e){var t="";return"Approved"===e.value&&(t=r.a.createElement("a",{style:Ie,target:"_blank",rel:"noopener noreferrer",href:"https://alrashidabetong.sharepoint.com/sites/apps/PMO/SupplierPOReport/".concat(e.dependentValues.chff,"-").concat(e.dependentValues.POVersion,".pdf")},r.a.createElement(p.a,{icon:d.c,className:"mr-2"}))),t},s.DateFormatter=function(e){return r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("span",null,s.formatDate(e.value)))},s.GrandTotalFormatter=function(e){return r.a.createElement(D.a,{style:Ge,value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(JSON.parse(e.dependentValues.POJSONData).Currency," ")})},s.initColumnDefs=function(){s._columns=[{key:"Id",name:"Ticket Number",formatter:s.itemViewFormatter,getRowMetaData:function(e){return e},width:"5%",Id:s.props.value},{key:"chff",name:"PO Number",width:"5%"},{key:"j3xm",name:"PO Maker",width:"5%"},{key:"ozud",name:"Department",width:"5%"},{key:"yyrh",name:"Grand Total",width:"10%",textAlign:"right !important",formatter:s.GrandTotalFormatter,getRowMetaData:function(e){return e}},{key:"Created",name:"Requested Date",width:"5%",formatter:s.DateFormatter},{key:"RequestStatus",name:"Request Status",width:"25%"},{key:"ApprovalStatus",name:"Approval Status",width:"25%"},{key:"RespondedDate",name:"Responded Date",width:"25%"},{key:"PendingWith",name:"Pending With",width:"25%"},{key:"POStatus",name:"IPOC",formatter:s.itemPDFViewFormatter,width:"1%",getRowMetaData:function(e){return e}},{key:"POStatus",name:"SPOC",formatter:s.SOitemPDFViewFormatter,width:"1%",getRowMetaData:function(e){return e}}]},s.rowGetter=function(e){return s.props.PODetails[e]},s.initColumnDefs(),s}return Object(i.a)(a,[{key:"formatDate",value:function(e){return r.a.createElement(Z.a,{format:"MM/DD/YYYY hh:mm"},e)}},{key:"render",value:function(){var e;return this.props.PODetails?(console.log(void 0),e=r.a.createElement(xe.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.props.PODetails.length,minHeight:1e3,isScrolling:!1,sortColumn:!0,width:100})):e=r.a.createElement("div",{className:"text-center"},r.a.createElement(Ne.a,{className:"mr-3",animation:"border",variant:"secondary"}),r.a.createElement("span",null,"Loading PO Details ...")),r.a.createElement($.a,{style:{width:"100%"}},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Archived Purchase Order Requests")),r.a.createElement(L.a,{md:12},e)))}}]),a}(n.Component),qe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(o.a)(this,a),(r=t.call(this,e,n)).GetPODetails=function(){Me("ArchivedPO").then((function(e){return r.setState({PODetails:e,loaded:!0,LatestPOID:e[0].Id})}))},r.handleSearchInput=function(e){r.setState({PONumber:e.target.value})},r.searchData=function(){Ae("ArchivedPO",r.state.PONumber).then((function(e){return r.setState({PODetails:e})})),console.log(r.state.PONumber)},r.resetSearch=function(){r.GetPODetails()},r.filterRequestStatus=function(e){r.setState({RequestStatusFilter:e.target.value})},r.filterApprovalStatus=function(e){r.setState({ApprovalStatusFilter:e.target.value})},r.filterDepartment=function(e){r.setState({DepartmentFilter:e.target.value})},r.filterPOMaker=function(e){r.setState({POMakerFilter:e.target.value})},r.state={loaded:!1,PODetails:null,PONumber:"",RequestStatusFilter:"All",DepartmentFilter:"All",ApprovalStatusFilter:"All",POMakerFilter:"All"},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.GetPODetails()}},{key:"filterItems",value:function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(q.a)(this.state.PODetails);try{for(n.s();!(r=n.n()).done;)(s=r.value).chff.indexOf(t.PONumber)>-1&&a.push(s)}catch(l){n.e(l)}finally{n.f()}return e.abrupt("return",Promise.resolve(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetNextPagePO",value:function(e){var t=this;De("ArchivedPO",e).then((function(e){return t.setState({PODetails:e})}))}},{key:"GetFinalPagePO",value:function(e){var t=this;Se("ArchivedPO",e).then((function(e){return t.setState({PODetails:e})}))}},{key:"SearchPO",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;console.log(this.state.LatestPOID);var t,a,n=this.state.LatestPOID-250-250,s=n-250,l=s-250,c=l-250,o=c-250,i=o-250,u=i-250,m=u-250,h=m-250,f=h-250,E=f-250,v=this.state.PODetails;if("All"!==this.state.RequestStatusFilter&&(v=v.filter((function(t){return t.RequestStatus===e.state.RequestStatusFilter}))),"All"!==this.state.ApprovalStatusFilter&&(v=v.filter((function(t){return t.ApprovalStatus===e.state.ApprovalStatusFilter}))),"All"!==this.state.DepartmentFilter&&(v=v.filter((function(t){return t.ozud===e.state.DepartmentFilter}))),"All"!==this.state.POMakerFilter&&(v=v.filter((function(t){return t.j3xm===e.state.POMakerFilter}))),this.state.PODetails){var O=Object(le.a)(new Set(this.state.PODetails.map((function(e){return e.ozud}))));t=r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterDepartment},r.a.createElement("option",{defaultValue:!0},"All"),O.map((function(e,t){return r.a.createElement("option",{key:t},e)})),";")}if(this.state.PODetails){var b=Object(le.a)(new Set(this.state.PODetails.map((function(e){return e.j3xm}))));a=r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterPOMaker},r.a.createElement("option",{defaultValue:!0},"All"),b.map((function(e,t){return r.a.createElement("option",{key:t},e)})),";")}return r.a.createElement("div",{style:{minWidth:"100%",maxWidth:"100%"}},r.a.createElement($.a,{style:{width:"100%"},className:"mb-3"},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.e,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Filter Purchase Order Requests"))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"POMaker"),a),r.a.createElement("div",{className:"col-md-9",id:"legend"},r.a.createElement("p",{className:"mt-2"},r.a.createElement("span",{id:"ShortF"},"PM:")," Purchase Manager",r.a.createElement("span",{id:"ShortF"},"DM:")," Department Manager",r.a.createElement("span",{id:"ShortF"},"GM:")," General Manager")))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Request Status"),r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterRequestStatus},r.a.createElement("option",{defaultValue:!0},"All"),r.a.createElement("option",null,"Not Started"),r.a.createElement("option",null,"In Progress"),r.a.createElement("option",null,"Completed"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Approval Status"),r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterApprovalStatus},r.a.createElement("option",{defaultValue:!0},"All"),r.a.createElement("option",null,"PM-Approved"),r.a.createElement("option",null,"DM-Approved"),r.a.createElement("option",null,"AGM Approved"),r.a.createElement("option",null,"GM-Approved"),r.a.createElement("option",null,"PM-Rejected"),r.a.createElement("option",null,"DM-Rejected"),r.a.createElement("option",null,"GM-Rejected"),r.a.createElement("option",null,"AGM Rejected"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Department"),t),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Search PO"),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(_.a,{type:"text",placeholder:"Enter PO Number",value:this.state.PONumber,onChange:this.handleSearchInput}),r.a.createElement("button",{className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.searchData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.resetSearch,type:"button"},"Reset")))))),r.a.createElement(Fe,{PODetails:v}),r.a.createElement("br",null),r.a.createElement(L.a,{md:12},r.a.createElement("div",{id:"pagination"},r.a.createElement(T.a,{size:"sm",color:"primary"},"1")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(n)}},"2")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(s)}},"3")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(l)}},"4")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(c)}},"5")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(o)}},"6")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(i)}},"7")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(u)}},"8")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(m)}},"9")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(h)}},"10")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(f)}},"11")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetNextPagePO(E)}},"12")," ",r.a.createElement(T.a,{size:"sm",color:"primary",onClick:function(){return e.GetFinalPagePO(E)}},"13")," ")),r.a.createElement("br",null))}}]),a}(n.Component),Be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var s;return Object(o.a)(this,a),(s=t.call(this,e,n)).itemViewFormatter=function(e){return console.log(e.dependentValues.Id,e.value),r.a.createElement(b.a,{className:"table-anchor",to:"/po-request/Taskview/".concat(e.value,"/").concat(e.dependentValues.Id)},r.a.createElement(T.a,{size:"sm",color:"success",id:"RWButton"},"Click here")," ")},s.GrandTotalFormatter=function(e){return r.a.createElement(D.a,{value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(JSON.parse(e.dependentValues.POJSONData).Currency," ")})},s.DateFormatter=function(e){return r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("span",null,s.formatDate(e.value)))},s.CheckPriority=function(e){return"High"===e.value?r.a.createElement("div",{style:{background:"rgba(220, 53, 69,0.7)",color:"white",fontWeight:"bold",textAlign:"center"}},e.value):r.a.createElement("div",null,e.value)},s.initColumnDefs=function(){s._columns=[{key:"Id",name:"Task ID",width:"5%"},{key:"Created",name:"Assigned Date",width:"15%",formatter:s.DateFormatter},{key:"DueDate",name:"Due Date",width:"15%",formatter:s.DateFormatter},{key:"Status",name:"Status",width:"15%"},{key:"RespondedDate",name:"RespondedDate",width:"15%"},{key:"Title",name:"View Task",width:"10%",formatter:s.itemViewFormatter,getRowMetaData:function(e){return e},Id:s.props.value,TaskId:s.props.Id}]},s.rowGetter=function(e){return s.props.TaskDetails[e]},s.initColumnDefs(),s}return Object(i.a)(a,[{key:"formatDate",value:function(e){return r.a.createElement(Z.a,{format:"DD-MM-YYYY  hh:mm"},e)}},{key:"render",value:function(){localStorage.removeItem("TASKID");var e;return e=this.props.TaskDetails?r.a.createElement(xe.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.props.TaskDetails.length,minHeight:1e3,isScrolling:!1,sortColumn:!0}):r.a.createElement("div",{className:"text-center"},r.a.createElement(Ne.a,{className:"mr-3",animation:"border",variant:"secondary"}),r.a.createElement("span",null,"Loading Task Details ...")),r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{style:{width:"100%"}},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"My Workflow Tasks")),r.a.createElement(L.a,{md:12},e))))}}]),a}(n.Component),Ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(o.a)(this,a),(r=t.call(this,e,n)).GetTaskDetails=function(){N().then((function(e){return r.setState({CurrentUserID:e})})),S("Workflow Tasks",r.state.CurrentUserID).then((function(e){return r.setState({TaskDetails:e,CurrentStatus:"In Progress"})}))},r.handleSearchInput=function(e){r.setState({PONumber:e.target.value})},r.searchData=function(){r.filterItems({PONumber:r.state.PONumber}).then((function(e){r.setState({TaskDetails:e,CurrentStatus:""})}))},r.resetSearch=function(e){r.setState({CurrentStatus:document.getElementById("exampleSelect").value}),r.GetTaskDetails()},r.filterStatus=function(e){r.setState({CurrentStatus:document.getElementById("exampleSelect").value,loaded:!1,TaskDetails:null,PONumber:""})},r.state={loaded:!1,TaskDetails:null,PONumber:"",CurrentUserID:"1",CurrentStatus:"All",DataValue:"True",DepartmentFilter:"All"},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.GetTaskDetails()}},{key:"filterItems",value:function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(q.a)(this.state.TaskDetails);try{for(n.s();!(r=n.n()).done;)(s=r.value).PONumber.indexOf(t.PONumber)>-1&&a.push(s)}catch(l){n.e(l)}finally{n.f()}return e.abrupt("return",Promise.resolve(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.TaskDetails;return"In Progress"===this.state.CurrentStatus&&S("Workflow Tasks",this.state.CurrentUserID).then((function(t){return e.setState({TaskDetails:t.filter((function(t){return t.AssignedToId===e.state.CurrentUserID})),CurrentStatus:""})})),"Completed"===this.state.CurrentStatus&&k("Workflow Tasks",this.state.CurrentUserID).then((function(t){return e.setState({TaskDetails:t.filter((function(t){return t.AssignedToId===e.state.CurrentUserID})),CurrentStatus:""})})),r.a.createElement("div",{style:{minWidth:"100%",maxWidth:"100%"}},r.a.createElement($.a,{style:{width:"100%"},className:"mb-3"},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.e,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Filter My Tasks"))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Filter by Status"),r.a.createElement(_.a,{type:"select",name:"select",id:"exampleSelect",onChange:this.filterStatus},r.a.createElement("option",null,"In Progress"),r.a.createElement("option",{value:"Completed"},"Tasks completed recently"))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Search PO"),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(_.a,{type:"text",placeholder:"Enter PO Number",value:this.state.PONumber,onChange:this.handleSearchInput}),r.a.createElement("button",{className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.searchData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.resetSearch,type:"button"},"Reset")))))),r.a.createElement(Be,{TaskDetails:t}))}}]),a}(n.Component),$e=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e,t=localStorage.getItem("POHomeURL");return console.log(t),null!==t&&(e=r.a.createElement(G.b,{to:"".concat(t)}),localStorage.removeItem("POHomeURL")),r.a.createElement("div",null,e)}}]),a}(n.Component),We=a(537),ze=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Purchase MGR'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Depart. MGR'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Asst.Gen.MGR'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=(a(64),function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Purchase MGR' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),Ye=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Depart. MGR' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"''"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Je=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'Depart. MGR' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"''"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=ResponseForDashboard eq 'Approved' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"'&$top=10000&$orderby=ID%20desc'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"'&$top=10000&$orderby=ID%20desc'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=ResponseForDashboard eq 'Rejected' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"'&$top=10000&$orderby=ID%20desc'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,console.log(s.d.results.length),e.abrupt("return",s.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'General MGR' and Created ge datetime'").concat(a,"' and Created le datetime'").concat(n,"'&$top=10000&$orderby=ID%20desc'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,e.abrupt("return",s.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=PendingWith eq 'General MGR'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=ResponseForDashboard eq 'Approved'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=ResponseForDashboard eq 'Rejected'&$top=10000&$orderby=ID%20desc"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.d.results.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$top=10000&$orderby=ID%20desc'"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,console.log(n.d.results),e.abrupt("return",n.d.results.length);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=a(129),rt=a.n(nt),st=a(494),lt=new Date,ct=lt.getFullYear(),ot=lt.getUTCMonth()+1,it=ot.toString().length<2?"0".concat(ot):ot,ut=lt.getUTCDate().toString().length<2?"0".concat(lt.getUTCDate()):lt.getUTCDate(),mt=("".concat(ct,"-").concat(it,"-").concat(ut),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(o.a)(this,a),(r=t.call(this,e,n)).Dash=function(){at("PMO").then((function(e){return r.setState({Total:e})})),ze("PMO").then((function(e){return r.setState({PMPending:e})})),_e("PMO").then((function(e){return r.setState({AGMPending:e})})),Le("PMO").then((function(e){return r.setState({DMPending:e})})),Ke("PMO").then((function(e){return r.setState({GMPending:e})})),et("PMO").then((function(e){return r.setState({Approved:e})})),tt("PMO").then((function(e){return r.setState({Rejected:e})}))},r.getdata=function(){at("PMO").then((function(e){return r.setState({Total:e})})),et("PMO").then((function(e){return r.setState({Approved:e})})),tt("PMO").then((function(e){return r.setState({Rejected:e})})),ze("PMO").then((function(e){return r.setState({PMPending:e})})),Le("PMO").then((function(e){return r.setState({DMPending:e})})),Ke("PMO").then((function(e){return r.setState({GMPending:e})}))},r.PeriodData=function(){""===r.state.fromDate?Y()("Please choose From Date"):""===r.state.TODate?Y()("Please choose End Date"):(console.log(r.state.fromDate),console.log(r.state.TODate),He("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({Approved:e})})),Ze("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({Rejected:e})})),Qe("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({Total:e})})),Ue("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({PMPending:e})})),Je("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({DMPending:e})})),Xe("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({GMPending:e})})),Ye("PMO",r.state.fromDate,r.state.TODate).then((function(e){return r.setState({AGMPending:e})})))},r.state={PMPending:"",DMPending:"",GMPending:"",AGMPending:"",Approved:"",Rejected:"",Total:"",RequestDuration:"All",fromDate:"",TODate:""},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.Dash()}},{key:"render",value:function(){var e=this,t={width:"100%"},a={width:"100%"},n={minWidth:"100%",maxWidth:"100%"};return r.a.createElement("div",{style:n},r.a.createElement($.a,{style:t},r.a.createElement(j.a,null,r.a.createElement("p",{id:"Expo"},"Filter PO Status"),r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(st.a,{id:"date",type:"date",onChange:function(t){var a=t.target.value+"T00:00:00.000Z";e.setState({fromDate:a})}}),r.a.createElement(st.a,{id:"date",type:"date",onChange:function(t){var a=t.target.value+"T00:00:00.000Z";e.setState({TODate:a})}}),r.a.createElement("button",{className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.PeriodData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.getdata,type:"button"},"Reset")))),r.a.createElement("br",null),r.a.createElement($.a,{style:t,className:"mb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-sm-6 col-lg-6"},r.a.createElement("div",{className:"col-md-12 col-sm-12 col-lg-12"},r.a.createElement("p",{className:"DashboardName"},"Purchase Order Request"),r.a.createElement("div",{className:" col-md-6 col-sm-6 col-lg-6 ",id:"TotalRequest"},r.a.createElement("p",null,"Total Request"),r.a.createElement("p",{id:"TR"},r.a.createElement(rt.a,{start:0,end:this.state.Total}))))),r.a.createElement("div",{className:"col-md-6 col-lg-6 col-sm-6 col-xs-6"},r.a.createElement("div",{style:n},r.a.createElement(We.a,{style:n,data:{labels:["Pendng with Purchase Manager","Pendng with Department Manager","Pendng with General Manager","Pendng with Asst.General Manager"],datasets:[{label:"Request Status",backgroundColor:["#B21F00","#C9DE00","#2FDE00"],hoverBackgroundColor:["#501800","#4B5000","#175000"],data:[this.state.PMPending,this.state.DMPending,this.state.GMPending,this.state.AGMPending]}]},options:{title:{display:!0,text:"",fontSize:20},legend:{display:!0,position:"right"}}}))," "),"  ")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Pending with Purchase Manager"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.PMPending})))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Pending with Department Manager"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.DMPending})))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Pending with General Manager"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.GMPending}))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 "},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Pending with Asst General Manager"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.AGMPending})))))),r.a.createElement("div",{className:"col-md-4 "},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Approved PO"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.Approved})))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{style:n},r.a.createElement($.a,{style:a,className:"mb-3",id:"DashTabs"},r.a.createElement("div",{className:"StatusCoumn"},r.a.createElement("p",{className:"statusheading"},"Rejected PO"),r.a.createElement("p",{className:"PMItems"},r.a.createElement(rt.a,{start:0,end:this.state.Rejected}))))))))}}]),a}(r.a.Component)),pt=a(332),dt=a.n(pt),ht=function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r,s,l,c,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?&$top=100&$orderby=ID%20desc')"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return a=e.sent,n=[],e.next=6,a.json();case 6:for(r=e.sent,s=0;s<r.d.results.length;s++)l=r.d.results[s].yyrh,c="".concat(JSON.parse(r.d.results[s].POJSONData).Currency," "),o=(c+l).replace(/"([^"]+(?="))"/g,"$1"),n.push({TicketNumber:r.d.results[s].vwno,RespondedDate:r.d.results[s].RespondedDate,PONumber:r.d.results[s].chff,POMaker:r.d.results[s].j3xm,Department:r.d.results[s].ozud,GrandTotal:o,RequestedDate:r.d.results[s].Created,RequestStatus:r.d.results[s].RequestStatus,ApprovalStatus:r.d.results[s].ApprovalStatus,PendingWith:r.d.results[s].PendingWith});return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(y.a)(P.a.mark((function e(t,a,n){var s,l,c,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/sites/apps/PMO/_api/web/lists/GetByTitle('".concat(t,"')/items?$select=*&$filter=(Created ge datetime'").concat(a,"') and (Created le datetime'").concat(n,"')"),{headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}});case 2:return s=e.sent,l=[],e.next=6,s.json();case 6:for(c=e.sent,console.log(c.d.results),o=0;o<c.d.results.length;o++)l.push({TicketNumber:c.d.results[o].vwno,PONumber:c.d.results[o].chff,POMaker:c.d.results[o].j3xm,Department:c.d.results[o].ozud,GrandTotal:r.a.createElement(D.a,{style:{textAlign:"right"},value:c.d.results[o].yyrh||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(JSON.parse(c.d.results[o].POJSONData).Currency," ")}),RequestedDate:c.d.results[o].Created,RequestStatus:c.d.results[o].RequestStatus,ApprovalStatus:c.d.results[o].ApprovalStatus,PendingWith:c.d.results[o].PendingWith});return e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();function Et(e){var t=e.columnDef,a=e.onFilterChanged;return r.a.createElement(st.a,{id:"date",type:"date",defaultValue:"2020-07-28",onChange:function(e){a(t.tableData.id,e.target.value)}})}var vt=a(542),Ot=a.n(vt),bt=a(552),gt=a.n(bt),Pt=a(543),yt=a.n(Pt),Dt=a(550),St=a.n(Dt),kt=a(340),Nt=a.n(kt),wt=a(339),xt=a.n(wt),jt=a(544),Ct=a.n(jt),Tt=a(545),At=a.n(Tt),Rt=a(547),Mt=a.n(Rt),It=a(548),Gt=a.n(It),Ft=a(549),qt=a.n(Ft),Bt=a(553),Vt=a.n(Bt),$t=a(546),Wt=a.n($t),zt=a(551),Lt=a.n(zt),_t=a(554),Ut=a.n(_t),Yt={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ot.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ct.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(Nt.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(At.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Wt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(Mt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Gt.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(qt.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Nt.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(Lt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Vt.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ut.a,Object.assign({},e,{ref:t}))}))},Jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var s;return Object(o.a)(this,a),(s=t.call(this,e,n)).GrandTotalFormatter=function(e){return r.a.createElement(D.a,{style:{textAlign:"right"},value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(JSON.parse((void 0).dependentValues.POJSONData).Currency," ")})},s.PeriodData=function(){console.log(s.state.fromDate),console.log(s.state.TODate),void 0===s.state.fromDate?Y()("Provide From Date"):void 0===s.state.TODate?Y()("Provide To Date"):ft("PMO",s.state.fromDate,s.state.TODate).then((function(e){return s.setState({PODetails:e})}))},s.getdata=function(){ht("PMO").then((function(e){return s.setState({PODetails:e})}))},s.state={loaded:!1,PODetails:[]},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getdata()}},{key:"render",value:function(){var e=this;this.state.PODetails;console.log(this.state.PODetails);var t=r.a.createElement(dt.a,{icons:Yt,title:"",columns:[{title:"Ticket Number",field:"TicketNumber"},{title:"PO Number",field:"PONumber"},{title:"PO Maker",field:"POMaker"},{title:"Department",field:"Department"},{title:"Grand Total",field:"GrandTotal",formatter:this.GrandTotalFormatter},{title:"Requested Date",field:"RequestedDate",filterComponent:Et},{title:"Request Status",field:"RequestStatus"},{title:"Approval Status",field:"ApprovalStatus"},{title:"Pending with",field:"PendingWith"},{title:"Responded Date",field:"RespondedDate"}],data:this.state.PODetails,options:{exportButton:!0,pageSize:50,isLoading:!0,exportAllData:!0}});return r.a.createElement("div",{style:{minWidth:"100%",maxWidth:"100%"}},r.a.createElement($.a,{style:{width:"100%"}},r.a.createElement(j.a,null,r.a.createElement("p",{id:"Expo"},"Export PO with in dates"),r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(st.a,{id:"date",type:"date",onChange:function(t){var a=t.target.value+"T00:00:00.000Z";e.setState({fromDate:a})}}),r.a.createElement(st.a,{id:"date",type:"date",onChange:function(t){var a=t.target.value+"T00:00:00.000Z";e.setState({TODate:a})}}),r.a.createElement("button",{ref:"Btn",className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.PeriodData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.getdata,type:"button"},"Reset")))),r.a.createElement("br",null),t)}}]),a}(n.Component),Ht=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var s;return Object(o.a)(this,a),(s=t.call(this,e,n)).itemViewFormatter=function(e){return r.a.createElement("a",{className:"table-anchor",target:"_self",rel:"noopener noreferrer",href:"/sites/apps/PMO/Lists/ttt%20Tasks/EditForm.aspx?ID=".concat(e.dependentValues.Id)},e.value)},s.GrandTotalFormatter=function(e){return null===e.dependentValues.Currency?r.a.createElement(D.a,{style:{textAlign:"right"},value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"SAR"}):r.a.createElement(D.a,{style:{textAlign:"right"},value:e.value||0,displayType:"text",thousandSeparator:!0,prefix:"".concat(e.dependentValues.Currency," ")})},s.DateFormatter=function(e){return r.a.createElement("div",{className:"text-center py-2"},r.a.createElement("span",null,s.formatDate(e.value)))},s.CheckPriority=function(e){return"High"===e.value?r.a.createElement("div",{style:{background:"rgba(220, 53, 69,0.7)",color:"white",fontWeight:"bold",textAlign:"center"}},e.value):r.a.createElement("div",null,e.value)},s.initColumnDefs=function(){s._columns=[{key:"Id",name:"Task ID",width:"5%"},{key:"PONumber",name:"PO Number",width:"10%",formatter:s.itemViewFormatter,getRowMetaData:function(e){return e}},{key:"InitiatorName",name:"Initiator Name",width:"15%"},{key:"Department",name:"Department",width:"15%"},{key:"Created",name:"Assigned Date",width:"15%",formatter:s.DateFormatter},{key:"DueDate",name:"Due Date",width:"15%",formatter:s.DateFormatter},{key:"GrandTotal",name:"Grand Total",width:"10%",formatter:s.GrandTotalFormatter,getRowMetaData:function(e){return e}},{key:"Status",name:"Status",width:"15%"},{key:"ReviwalStatus",name:"Reviewal Status",width:"15%"},{key:"RespondedDate",name:"RespondedDate",width:"15%"},{key:"POPriority",name:"Priority",width:"15%",formatter:s.CheckPriority,getRowMetaData:function(e){return e}}]},s.rowGetter=function(e){return s.props.TaskDetails[e]},s.initColumnDefs(),s}return Object(i.a)(a,[{key:"formatDate",value:function(e){return r.a.createElement(Z.a,{format:"DD-MM-YYYY  hh:mm"},e)}},{key:"render",value:function(){var e;return e=this.props.TaskDetails?r.a.createElement(xe.a,{columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.props.TaskDetails.length,minHeight:1e3,isScrolling:!1,sortColumn:!0}):r.a.createElement("div",{className:"text-center"},r.a.createElement(Ne.a,{className:"mr-3",animation:"border",variant:"secondary"}),r.a.createElement("span",null,"Loading Task Details ...")),r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{style:{width:"100%"}},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.b,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"My Completed Tasks")),r.a.createElement(L.a,{md:12},e))))}}]),a}(n.Component),Qt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e,n){var r;return Object(o.a)(this,a),(r=t.call(this,e,n)).getuserid=function(){},r.GetTaskDetails=function(){N().then((function(e){return r.setState({CurrentUserID:e})}))},r.handleSearchInput=function(e){r.setState({PONumber:e.target.value})},r.searchData=function(){r.filterItems({PONumber:r.state.PONumber}).then((function(e){r.setState({TaskDetails:e})}))},r.resetSearch=function(){r.GetTaskDetails()},r.filterStatus=function(e){r.setState({CurrentStatus:e.target.value,loaded:!1,TaskDetails:null,PONumber:""})},r.state={loaded:!1,TaskDetails:null,PONumber:"",CurrentUserID:"",CurrentStatus:"All",DataValue:"True",DepartmentFilter:"All"},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getuserid(),this.GetTaskDetails()}},{key:"filterItems",value:function(){var e=Object(y.a)(P.a.mark((function e(t){var a,n,r,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(q.a)(this.state.TaskDetails);try{for(n.s();!(r=n.n()).done;)(s=r.value).PONumber.indexOf(t.PONumber)>-1&&a.push(s)}catch(l){n.e(l)}finally{n.f()}return e.abrupt("return",Promise.resolve(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.state.CurrentStatus,console.log("Task Details in grid",this.state.TaskDetails),console.log("Currnet User in state",this.state.CurrentUserID);var e=this.state.TaskDetails;return r.a.createElement("div",{style:{minWidth:"100%",maxWidth:"100%"}},r.a.createElement($.a,{style:{width:"100%"},className:"mb-3"},r.a.createElement(j.a,null,r.a.createElement(L.a,{style:{display:"flex"},className:"form-header-container",md:12},r.a.createElement(p.a,{icon:d.e,className:"mr-2"}),r.a.createElement("h5",{className:"form-header"},"Filter My Tasks"))),r.a.createElement("form",{className:"form-horizontal"},r.a.createElement(z.a,{row:!0},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(ne.a,{for:"exampleSelect",className:"mt-2"},"Search PO"),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(_.a,{type:"text",placeholder:"Enter PO Number",value:this.state.PONumber,onChange:this.handleSearchInput}),r.a.createElement("button",{className:"btn btn-sm btn-success mr-2 ml-2 btn-cancel",onClick:this.searchData,type:"button"},"Search"),r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.resetSearch,type:"button"},"Reset")))))),r.a.createElement(Ht,{TaskDetails:e}))}}]),a}(n.Component),Zt=(n.Component,function(e){return r.a.createElement(x.a,{fluid:!0,className:O()("content",{"is-open":e.isOpen})},r.a.createElement(I,{toggle:e.toggle}),r.a.createElement(j.a,{className:"m-1 bg-white"},r.a.createElement(G.e,null,r.a.createElement(G.c,{exact:!0,path:"/",component:$e}),r.a.createElement(G.c,{exact:!0,path:"/po-search",component:ae}),r.a.createElement(G.c,{exact:!0,path:"/po-request/:mode",component:Pe}),r.a.createElement(G.c,{exact:!0,path:"/po-request/:mode/:id",component:Pe}),r.a.createElement(G.c,{exact:!0,path:"/po-request/:mode/:id/:TaskId",component:Pe}),r.a.createElement(G.c,{exact:!0,path:"/pages/my-tasks",component:Ve}),r.a.createElement(G.c,{exact:!0,path:"/pages/my-completed",component:Qt}),r.a.createElement(G.c,{exact:!0,path:"/pages/my-requests",component:Re}),r.a.createElement(G.c,{exact:!0,path:"/pages/ArchivedPO",component:qe}),r.a.createElement(G.c,{exact:!0,path:"/search-po",component:function(){return"Search PO"}}),r.a.createElement(G.c,{exact:!0,path:"/contact",component:function(){return"Contact"}}),r.a.createElement(G.c,{exact:!0,path:"/pages/Dashboard",component:mt}),r.a.createElement(G.c,{exact:!0,path:"/pages/ExportPO",component:Jt}))))}),Xt=function(e){var t=Object(n.useState)(!0),a=Object(c.a)(t,2),s=a[0],l=a[1],o=function(){return l(!s)};return r.a.createElement(G.a,null,r.a.createElement("div",{className:"App wrapper"},r.a.createElement(w,{toggle:o,isOpen:s}),r.a.createElement(Zt,{toggle:o,isOpen:s})))},Kt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ea(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(Xt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/sites/apps/PMO",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/sites/apps/PMO","/service-worker.js");Kt?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ea(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ea(e)}))}}()}},[[563,1,2]]]);
//# sourceMappingURL=main.ea697694.chunk.js.map